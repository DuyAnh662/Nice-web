<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Amaze — Web Experience</title>
  <style>
    :root{
      --bg:#05060a;
      --glass: rgba(255,255,255,0.06);
      --accent: #7ef9ff;
      --accent-2: #9b7eff;
      --glass-border: rgba(255,255,255,0.08);
    }
    html,body{height:100%;margin:0;background:var(--bg);font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    canvas#bg{position:fixed;inset:0;z-index:0;display:block}
    .wrap{position:relative;z-index:2;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px}
    .card{
      width:min(1100px,96%);
      backdrop-filter: blur(10px) saturate(1.2);
      background:linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border:1px solid var(--glass-border);
      border-radius:20px;padding:28px;box-shadow:0 10px 60px rgba(2,6,23,0.6);display:grid;grid-template-columns:1fr 420px;gap:24px;align-items:center
    }
    .hero{padding:8px 20px}
    h1{margin:0;font-size:clamp(32px,6vw,64px);line-height:0.95;letter-spacing:-1px;color:white}
    .subtitle{margin-top:12px;color:rgba(255,255,255,0.78);font-size:16px}

    .controls{display:flex;gap:12px;margin-top:20px;align-items:center}
    .btn{appearance:none;border:0;padding:12px 18px;border-radius:12px;font-weight:600;cursor:pointer;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#041018;box-shadow:0 6px 30px rgba(124,58,237,0.28);}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#e8f6ff}

    .panel{padding:18px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03)}
    .right{display:flex;flex-direction:column;gap:14px}
    .mini{display:flex;gap:12px;align-items:center}
    .stat{flex:1;padding:12px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);text-align:center}
    .stat strong{display:block;font-size:20px;color:var(--accent)}
    .footer{font-size:13px;color:rgba(255,255,255,0.65);margin-top:8px}

    /* neon title animation */
    .neon{position:relative;display:inline-block}
    .neon::after{content:'';position:absolute;inset:0;filter:blur(18px);opacity:.45;background:linear-gradient(90deg,var(--accent),var(--accent-2));z-index:-1;border-radius:6px}

    /* glitch */
    .glitch{position:relative;color:white}
    .glitch span{position:relative;display:inline-block}
    .glitch::before,.glitch::after{content:attr(data-text);position:absolute;left:0;top:0;width:100%;overflow:hidden}
    .glitch::before{color:var(--accent);transform:translate(6px,-4px);mix-blend-mode:screen;opacity:.85}
    .glitch::after{color:var(--accent-2);transform:translate(-6px,4px);mix-blend-mode:screen;opacity:.75}
    @keyframes shake{0%{transform:translateX(0)}20%{transform:translateX(-4px)}40%{transform:translateX(4px)}60%{transform:translateX(-2px)}80%{transform:translateX(2px)}100%{transform:translateX(0)}}
    .glitch:active{animation:shake .35s linear}

    /* responsive */
    @media (max-width:900px){.card{grid-template-columns:1fr;align-items:stretch}.right{order:2}}

    /* little sparkle */
    .sparkle{position:absolute;pointer-events:none;z-index:3}
  </style>
</head>
<body>
  <canvas id="bg"></canvas>
  <div class="wrap">
    <div class="card">
      <div class="hero">
        <h1 class="glitch" data-text="AMAZE"> <span class="neon">AMAZE</span></h1>
        <p class="subtitle">Một trang web tương tác — di chuột, nhấp, và chuẩn bị kinh ngạc.</p>

        <div class="controls">
          <button id="surprise" class="btn">GÂY NGẠC NHIÊN</button>
          <button id="sense" class="btn ghost">Chuyển chế độ</button>
        </div>

        <div class="panel" style="margin-top:18px">
          <strong style="font-size:16px;color:var(--accent)">Hướng dẫn</strong>
          <ul style="margin:8px 0 0 20px;color:rgba(255,255,255,0.7);line-height:1.6">
            <li>Di chuyển chuột để kéo theo thiên thạch hạt.</li>
            <li>Nhấp vào "GÂY NGẠC NHIÊN" để bắn pháo hoa + nhạc.</li>
            <li>Kéo hoặc chạm để tạo các vệt sáng cá nhân hóa.</li>
          </ul>
        </div>
      </div>

      <div class="right">
        <div class="panel">
          <div class="mini">
            <div class="stat"><strong id="fps">0</strong>FPS</div>
            <div class="stat"><strong id="particles">0</strong>Hạt</div>
          </div>
          <div class="footer">Tương tác: Chuột / Chạm / Nhấp</div>
        </div>

        <div class="panel">
          <strong style="display:block;margin-bottom:8px">Tùy chỉnh</strong>
          <label style="display:block;font-size:13px;color:rgba(255,255,255,0.75)">Cường độ hạt
            <input id="intensity" type="range" min="0" max="2" step="0.01" value="1" style="width:100%;margin-top:8px">
          </label>
          <label style="display:block;margin-top:8px;font-size:13px;color:rgba(255,255,255,0.75)">Kích thước
            <input id="size" type="range" min="0.5" max="2.5" step="0.01" value="1" style="width:100%;margin-top:8px">
          </label>
        </div>
      </div>
    </div>
  </div>

  <svg class="sparkle" width="0" height="0" aria-hidden="true"></svg>

  <script>
  // Canvas particle system + fireworks + audio feedback
  const canvas = document.getElementById('bg');
  const ctx = canvas.getContext('2d');
  let w = canvas.width = innerWidth;
  let h = canvas.height = innerHeight;

  window.addEventListener('resize',()=>{w=canvas.width=innerWidth;h=canvas.height=innerHeight});

  // particle pool
  const particles = [];
  const config = {count:200, intensity:1, size:1};

  const rand = (a,b)=>Math.random()*(b-a)+a;

  class P{
    constructor(x,y,vx,vy,size,color,life){
      this.x=x;this.y=y;this.vx=vx;this.vy=vy;this.size=size;this.color=color;this.life=life;this.age=0;this.wob=rand(0,Math.PI*2)
    }
    step(dt){
      this.vy += 0.0*dt; // gravity minimal
      this.x += this.vx*dt;this.y += this.vy*dt;this.age+=dt;this.wob += dt*6;
    }
    draw(ctx){
      const t = Math.max(0,1 - this.age/this.life);
      ctx.beginPath();
      ctx.fillStyle = `rgba(${this.color.r},${this.color.g},${this.color.b},${(t*t)})`;
      ctx.arc(this.x + Math.sin(this.wob)*2, this.y + Math.cos(this.wob)*2, this.size * t, 0, Math.PI*2);
      ctx.fill();
    }
  }

  function spawn(x,y,spread=80,base=6,color=null,amount=12){
    for(let i=0;i<amount;i++){
      const ang = rand(0,Math.PI*2);
      const speed = rand(40,220) * (0.6 + config.intensity*0.8);
      const vx = Math.cos(ang)*speed;
      const vy = Math.sin(ang)*speed;
      const s = rand(1.2,4.5) * config.size;
      const col = color || {r:Math.floor(rand(120,255)), g:Math.floor(rand(120,255)), b:Math.floor(rand(160,255))};
      const life = rand(0.7,1.8);
      particles.push(new P(x,y,vx,vy,s,col,life));
    }
  }

  let last = performance.now();
  let fpsEl = document.getElementById('fps');
  let pEl = document.getElementById('particles');
  let fpsSm = 60;

  function frame(now){
    const dt = Math.min(0.06,(now-last)/1000);
    last = now; fpsSm = fpsSm*0.95 + (1/dt)*0.05;
    fpsEl.textContent = Math.round(fpsSm);

    // clear with trailing gradient
    ctx.globalCompositeOperation = 'source-over';
    ctx.fillStyle = 'rgba(5,6,10,0.28)';
    ctx.fillRect(0,0,w,h);

    // background moving stars
    for(let i=0;i<60;i++){
      const x = (i*1237 + Math.floor(now/50))%w;
      const y = (i*917 + Math.floor(now/80))%h;
      const r = 0.5 + (Math.sin((now/1000)+(i)) + 1)/2;
      ctx.fillStyle = `rgba(255,255,255,${0.03 + r*0.02})`;
      ctx.fillRect(x,y,1,1);
    }

    // update particles
    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.step(dt);
      p.draw(ctx);
      if(p.age > p.life){ particles.splice(i,1); }
    }

    pEl.textContent = particles.length;

    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);

  // mouse controls: attractor line
  let mouse = {x:w/2,y:h/2,down:false};
  addEventListener('mousemove',e=>{mouse.x=e.clientX;mouse.y=e.clientY;for(let i=0;i<2;i++) spawn(mouse.x,mouse.y,80,6,null,4)});
  addEventListener('pointerdown',e=>{mouse.down=true;spawn(e.clientX,e.clientY,120,8,null,28)});
  addEventListener('pointerup',e=>{mouse.down=false});

  // UI controls
  document.getElementById('intensity').addEventListener('input',e=>{config.intensity = parseFloat(e.target.value)});
  document.getElementById('size').addEventListener('input',e=>{config.size = parseFloat(e.target.value)});

  // surprise button -> fireworks + ascending chord using WebAudio
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  const btn = document.getElementById('surprise');
  let mode = 0;
  document.getElementById('sense').addEventListener('click',()=>{
    mode = (mode+1)%3;
    if(mode===0) document.body.style.background = 'var(--bg)';
    if(mode===1) document.body.style.background = 'linear-gradient(180deg,#001021,#0a0019)';
    if(mode===2) document.body.style.background = 'linear-gradient(45deg,#07121a,#0b0716)';
  });

  btn.addEventListener('click',async()=>{
    // particles explosion centers
    const cx = rand(100,w-100);
    const cy = rand(100,h-100);
    for(let i=0;i<8;i++){
      const angle = i*(Math.PI*2/8) + rand(-0.3,0.3);
      const px = cx + Math.cos(angle)*rand(0,40);
      const py = cy + Math.sin(angle)*rand(0,40);
      spawn(px,py,140,12,null,60);
    }
    // mini fireworks
    for(let i=0;i<5;i++){ spawn(rand(120,w-120), rand(120,h-120), 200, 14, null, 80); }

    // audio: quick ascending arpeggio + bell-ish tones
    if(audioCtx.state === 'suspended') await audioCtx.resume();
    const t0 = audioCtx.currentTime;
    const freqs = [220,330,440,660];
    freqs.forEach((f,idx)=>{
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type = 'sine';
      o.frequency.value = f * (1 + idx*0.02);
      g.gain.value = 0.001;
      o.connect(g);g.connect(audioCtx.destination);
      o.start(t0 + idx*0.06);
      g.gain.linearRampToValueAtTime(0.08, t0 + idx*0.06 + 0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, t0 + idx*0.06 + 1.2);
      o.stop(t0 + idx*0.06 + 1.2);
    });

    // visual sparkle burst
    for(let i=0;i<32;i++){
      spawn(cx + rand(-60,60), cy + rand(-60,60), 220, 8, {r:Math.floor(rand(120,255)),g:Math.floor(rand(120,255)),b:Math.floor(rand(180,255))}, 10);
    }
  });

  // subtle auto ambient spawn to keep scene alive
  setInterval(()=>{
    const x = rand(50,w-50); const y = rand(50,h-50);
    spawn(x,y,100,6,null,18);
  }, 900);

  // accessibility: allow spacebar to trigger surprise
  addEventListener('keydown',e=>{ if(e.code==='Space'){ e.preventDefault(); btn.click(); } });

  // initial burst
  for(let i=0;i<6;i++) spawn(w/2 + rand(-120,120), h/2 + rand(-120,120), 160, 8, null, 40);

  </script>
</body>
</html>
